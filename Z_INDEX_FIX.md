# 🔧 引导页黑屏问题修复说明

## 问题描述
打开引导页时，只能看到烟花特效，背景是黑色的，其他内容（文字、按钮等）都看不见。

## 问题原因
CSS 的 `z-index` 层级设置不正确，导致烟花 canvas 遮挡了引导页的内容。

---

## ✅ 修复方案

### 调整后的 Z-Index 层级结构

```
┌─────────────────────────────────────────┐
│  z-index: 100 (最顶层 - 可交互元素)      │
│  - 按钮 (.guide-btn)                    │
│  - 跳过按钮 (.guide-skip)                │
│  - 自动播放按钮 (.autoplay-toggle)       │
│  - 进度点 (.guide-progress)              │
│  - 提示文字 (.click-hint)                │
├─────────────────────────────────────────┤
│  z-index: 50 (视觉特效层)                │
│  - 烟花画布 (.fireworks-canvas)          │
├─────────────────────────────────────────┤
│  z-index: 20 (内容层)                    │
│  - 引导内容 (.guide-content)             │
├─────────────────────────────────────────┤
│  z-index: 10 (页面层)                    │
│  - 引导页面 (.guide-page)                │
├─────────────────────────────────────────┤
│  z-index: 0 (背景装饰层)                 │
│  - 气球 (.balloons-container)            │
│  - 星星 (.guide-star)                    │
│  - 爱心 (.guide-heart)                   │
│  - 背景装饰 (.guide-decorations)         │
└─────────────────────────────────────────┘
```

---

## 🔧 具体修改内容

### 1. 烟花画布 (`.fireworks-canvas`)
**修改前：**
```css
z-index: 999; /* 太高了，遮挡所有内容 */
```

**修改后：**
```css
z-index: 50; /* 在内容之上，作为最顶层的视觉特效 */
```

---

### 2. 引导页面 (`.guide-page`)
**修改前：**
```css
/* 没有 z-index */
```

**修改后：**
```css
z-index: 10; /* 确保在烟花和气球之上 */
```

---

### 3. 引导内容 (`.guide-content`)
**修改前：**
```css
z-index: 1; /* 太低了 */
```

**修改后：**
```css
z-index: 20; /* 高于page的z-index，确保内容可见 */
```

---

### 4. 按钮和交互元素
**修改的元素：**
- `.guide-btn` (继续按钮)
- `.guide-skip` (跳过按钮)
- `.autoplay-toggle` (自动播放控制)
- `.guide-progress` (进度点)
- `.click-hint` (提示文字)

**修改前：**
```css
z-index: 1;  /* 或 z-index: 2; 太低了 */
```

**修改后：**
```css
z-index: 100; /* 确保按钮可见且可交互 */
```

---

## 📊 修复效果

### 修复前 ❌
```
用户视角：
┌──────────────────────┐
│                      │
│    🎆🎆🎆            │ ← 只能看到烟花
│  🎆      🎆          │
│     🎆  🎆           │
│                      │ ← 背景全黑，看不到文字和按钮
│                      │
└──────────────────────┘
```

### 修复后 ✅
```
用户视角：
┌──────────────────────┐
│  [⏸]         [跳过›] │ ← 控制按钮可见
│                      │
│    💕                │ ← 图标可见
│  欢迎来到我们的爱情故事  │ ← 标题可见
│  Welcome to Our...   │ ← 副标题可见
│                      │
│   🎆  [开始浏览 →] 🎆 │ ← 按钮可见，烟花在背后
│                      │
│  ○ ● ○ ○ ○          │ ← 进度点可见
│ 点击屏幕任意位置绽放烟花  │ ← 提示可见
└──────────────────────┘
```

---

## 🎨 视觉层级说明

### 为什么这样设计？

1. **背景装饰层 (z-index: 0)**
   - 气球、星星、爱心等纯装饰元素
   - 在最底层，不干扰内容阅读
   - `pointer-events: none` - 不影响交互

2. **页面层 (z-index: 10)**
   - `.guide-page` 容器
   - 承载所有引导页内容

3. **内容层 (z-index: 20)**
   - 文字、图标等主要内容
   - 确保用户能清晰阅读

4. **视觉特效层 (z-index: 50)**
   - 烟花特效
   - 在内容之上，增加视觉趣味
   - `pointer-events: none` - 不阻止点击

5. **交互层 (z-index: 100)**
   - 按钮、进度点等可点击元素
   - 在最顶层，确保用户能操作
   - 必须能接收鼠标事件

---

## 🔍 如何验证修复

### 方法1：清除缓存后刷新
```javascript
// 浏览器控制台 (F12)
localStorage.clear();
location.reload();
```

### 方法2：强制刷新
按 `Ctrl + F5`

### 方法3：检查元素
1. 按 `F12` 打开开发者工具
2. 点击"元素"或"检查"标签
3. 找到 `.guide-overlay` 元素
4. 检查其子元素的 z-index 值

---

## 🎯 预期效果

修复后，您应该能看到：

✅ **背景：** 渐变色彩（紫色-粉色系）  
✅ **装饰：** 飘动的星星、爱心、气球  
✅ **内容：** 清晰的文字、图标、按钮  
✅ **特效：** 烟花在内容上方绽放（不遮挡文字）  
✅ **交互：** 所有按钮可以正常点击  

---

## 📱 移动端兼容性

所有 z-index 修改都兼容移动端，无需额外调整。

---

## 🐛 如果问题仍然存在

### 1. 检查浏览器缓存
有时 CSS 文件被缓存，强制刷新：
- Chrome/Edge: `Ctrl + Shift + Delete`
- Firefox: `Ctrl + Shift + Delete`
- Safari: `Command + Option + E`

### 2. 检查 CSS 文件是否正确加载
在浏览器控制台查看是否有 CSS 加载错误。

### 3. 检查浏览器兼容性
确保浏览器版本较新，支持：
- CSS `backdrop-filter`
- CSS `z-index`
- Canvas API

### 4. 查看控制台错误
按 `F12`，检查 Console 标签是否有 JavaScript 错误。

---

## 💡 最佳实践

### Z-Index 命名规范

为了避免将来再次出现类似问题，建议使用分层命名：

```css
/* 建议的 z-index 值 */
--z-background: 0;      /* 背景装饰 */
--z-content: 10;        /* 页面内容 */
--z-overlay: 50;        /* 视觉特效 */
--z-controls: 100;      /* 交互控件 */
--z-modal: 1000;        /* 模态框 */
--z-tooltip: 2000;      /* 提示框 */
```

### 使用 CSS 变量

可以在 `styles.css` 顶部定义：

```css
:root {
    --z-background: 0;
    --z-content: 10;
    --z-overlay: 50;
    --z-controls: 100;
}

.guide-page {
    z-index: var(--z-content);
}

.fireworks-canvas {
    z-index: var(--z-overlay);
}

.guide-btn {
    z-index: var(--z-controls);
}
```

---

## 📚 相关文档

- `README.md` - 项目总览
- `CUSTOMIZE.md` - 自定义指南
- `EFFECTS_GUIDE.md` - 特效说明
- `AUTOPLAY_GUIDE.md` - 自动播放指南
- `BUG_FIXES.md` - Bug 修复记录

---

**现在刷新页面，应该能看到完整的引导页了！** 🎉✨

